"use strict";(self["webpackChunke_shop"]=self["webpackChunke_shop"]||[]).push([[701],{5701:function(e,r,s){s.r(r),s.d(r,{default:function(){return E}});var a=s(3396),t=s(9242),o=s(7139);const u=e=>((0,a.dD)("data-v-7390cd06"),e=e(),(0,a.Cn)(),e),l={key:0,class:"login"},n=u((()=>(0,a._)("h1",null,"Please log in to access your Account",-1))),c=u((()=>(0,a._)("label",null,"Name:",-1))),d={key:0,class:"error"},i=u((()=>(0,a._)("label",null,"Password:",-1))),p={key:1,class:"error"},w=u((()=>(0,a._)("div",{class:"submit"},[(0,a._)("button",null,"Log In")],-1))),m={class:"submit"},v=u((()=>(0,a._)("button",null,"Create new Account instead",-1))),g={key:1,class:"success"},_=u((()=>(0,a._)("h1",null,"Successfully logged in!",-1))),h=u((()=>(0,a._)("p",null,"You are now ready to manage products!",-1))),y=[_,h];function b(e,r,s,u,_,h){const b=(0,a.up)("router-link");return u.jwt?((0,a.wg)(),(0,a.iD)("div",g,y)):((0,a.wg)(),(0,a.iD)("div",l,[n,(0,a._)("form",{onSubmit:r[2]||(r[2]=(0,t.iM)(((...e)=>u.handleSubmit&&u.handleSubmit(...e)),["prevent"]))},[c,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":r[0]||(r[0]=e=>u.userData.name=e),maxlength:"30",required:""},null,512),[[t.nr,u.userData.name]]),u.userError?((0,a.wg)(),(0,a.iD)("div",d,(0,o.zw)(u.userError),1)):(0,a.kq)("",!0),i,(0,a.wy)((0,a._)("input",{type:"password","onUpdate:modelValue":r[1]||(r[1]=e=>u.userData.password=e),required:""},null,512),[[t.nr,u.userData.password]]),u.passwordError?((0,a.wg)(),(0,a.iD)("div",p,(0,o.zw)(u.passwordError),1)):(0,a.kq)("",!0),w],32),(0,a._)("div",m,[(0,a.Wm)(b,{to:"/register"},{default:(0,a.w5)((()=>[v])),_:1})])]))}var k=s(4870),D=s(4161),f={setup(){const e=(0,k.iH)({name:"",password:""}),r=(0,k.iH)(localStorage.getItem("jwt")),s=(0,k.iH)(""),a=(0,k.iH)(""),t=async()=>{try{const r=await D.Z.post("https://e-shop.redglimmer.repl.co/login",e.value);localStorage.setItem("jwt",JSON.parse(r.request.response).accessToken),location.reload()}catch(r){r.request?401===r.request.status?(s.value="Invalid password",a.value=""):404===r.request.status&&(a.value="Invalid user name",s.value=""):(console.log(r),s.value="An error has occurred",a.value="An error has occurred")}};return{userData:e,passwordError:s,userError:a,jwt:r,handleSubmit:t}}},q=s(89);const S=(0,q.Z)(f,[["render",b],["__scopeId","data-v-7390cd06"]]);var E=S}}]);
//# sourceMappingURL=701.072340a1.js.map