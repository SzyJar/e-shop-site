{"version":3,"file":"js/472.d036a993.js","mappings":"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","sources":["webpack://e-shop/./src/views/Manage.vue","webpack://e-shop/./src/views/Manage.vue?baee"],"sourcesContent":["<template>\r\n  <div class=\"manage\">\r\n    <div class=\"form\">\r\n      <form @submit.prevent=\"handleSubmit\">\r\n      <h1>Add a new product to the database</h1>\r\n      <label>Name:</label>\r\n      <input type=\"text\" v-model=\"name\" maxlength=\"30\" required placeholder=\"Enter product name (required)\">\r\n      <div v-if=\"nameError\" class=\"error\">{{ nameError }}</div>\r\n\r\n      <h1>Additional product data (optional)</h1>\r\n      <label>Price:</label>\r\n      <input type=\"number\" step=\"0.01\" v-model=\"product.price\" placeholder=0.00>\r\n\r\n      <label>Image link:</label>\r\n      <input type=\"url\" v-model=\"product.image\" placeholder=\"https://images.unsplash.com/photo-1573376670774-4427757f7963\">\r\n\r\n      <label>Description:</label>\r\n      <textarea id=\"description\" v-model=\"product.description\" placeholder=\"Enter some information about the product\"></textarea>\r\n\r\n      <label>Release date:</label>\r\n      <input type=\"date\" v-model=\"product.releaseDate\">\r\n\r\n      <label>Producer:</label>\r\n      <input type=\"text\" v-model=\"product.company\" placeholder=\"Enter company name\">\r\n\r\n      <div class=\"submit\">\r\n        <button>SUBMIT</button>\r\n      </div>\r\n      </form>\r\n    </div>\r\n    <div class=\"preview-container\">\r\n      <h1>Preview your product</h1>\r\n      <div class=\"preview\">\r\n        <Details :details=\"product\" :preview=\"true\" />\r\n      </div>\r\n    </div>\r\n    <div class=\"image\">\r\n      <img :src=\"require('@/assets/delivery.png')\" alt=\"Delivery Image\">\r\n    </div>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport { ref, getCurrentInstance, computed } from 'vue'\r\nimport axios from 'axios'\r\nimport Details from '../components/Details.vue'\r\n\r\nexport default {\r\n  components: { Details },\r\n  setup() {\r\n    const name = ref('');\r\n    const product = ref({\r\n      name: null,\r\n      price: null,\r\n      company: null,\r\n      releaseDate: null,\r\n      image: null,\r\n      description: null\r\n    });\r\n\r\n    product.value.name = computed({\r\n      get: () => name.value,\r\n      set: newValue => {\r\n        return newValue;\r\n      }\r\n    });\r\n\r\n    const nameError = ref(null);\r\n\r\n    const instance = getCurrentInstance();\r\n    const router = instance.appContext.config.globalProperties.$router;\r\n\r\n    const handleSubmit = async () => {\r\n      try {\r\n        const jwtToken = localStorage.getItem('jwt');\r\n        const headers = {\r\n          Authorization: jwtToken\r\n        };\r\n        const res = await axios.post(process.env.VUE_APP_API_URL + `product/${name.value}`, product.value, { headers });\r\n        router.push({ name: 'products' });\r\n      } catch (error) {\r\n        if(!error.request) {\r\n          console.log(error);\r\n          nameError.value = '';\r\n        } else if (error.request.status === 409) {\r\n          nameError.value = 'Product already exist';\r\n        } else if (error.request.status === 401) {\r\n          localStorage.removeItem('jwt');\r\n          nameError.value = 'You are not authorized, please log in or register';\r\n          setTimeout(router.push({ name: 'login' }), 1000);\r\n        }\r\n      };\r\n    };\r\n\r\n    return {\r\n      name,\r\n      product,\r\n      nameError,\r\n      handleSubmit\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '../assets/styles/manage.scss'\r\n</style>","import { render } from \"./Manage.vue?vue&type=template&id=0dea79b0&scoped=true\"\nimport script from \"./Manage.vue?vue&type=script&lang=js\"\nexport * from \"./Manage.vue?vue&type=script&lang=js\"\n\nimport \"./Manage.vue?vue&type=style&index=0&id=0dea79b0&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0dea79b0\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_createElementBlock","_hoisted_1","_hoisted_2","onSubmit","_cache","_withModifiers","args","$setup","handleSubmit","_hoisted_3","_hoisted_4","type","name","$event","maxlength","required","placeholder","nameError","_hoisted_5","_toDisplayString","_hoisted_6","_hoisted_7","step","product","price","_hoisted_8","image","_hoisted_9","id","description","_hoisted_10","releaseDate","_hoisted_11","company","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_createVNode","_component_Details","details","preview","_hoisted_16","src","require","alt","components","Details","setup","ref","value","computed","get","set","newValue","instance","getCurrentInstance","router","appContext","config","globalProperties","$router","async","jwtToken","localStorage","getItem","headers","Authorization","axios","post","push","error","request","status","removeItem","setTimeout","console","log","__exports__","render"],"sourceRoot":""}