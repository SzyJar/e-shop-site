"use strict";(self["webpackChunke_shop"]=self["webpackChunke_shop"]||[]).push([[661],{7661:function(e,r,s){s.r(r),s.d(r,{default:function(){return E}});var a=s(3396),t=s(9242),u=s(7139);const o=e=>((0,a.dD)("data-v-7f52311f"),e=e(),(0,a.Cn)(),e),l={key:0,class:"login"},n=o((()=>(0,a._)("h1",null,"Please log in to access your Account",-1))),c=o((()=>(0,a._)("label",null,"Name:",-1))),d={key:0,class:"error"},i=o((()=>(0,a._)("label",null,"Password:",-1))),p={key:1,class:"error"},w=o((()=>(0,a._)("div",{class:"submit"},[(0,a._)("button",null,"Log In")],-1))),m={class:"submit"},v=o((()=>(0,a._)("button",null,"Create new Account instead",-1))),g={key:1,class:"success"},_=o((()=>(0,a._)("h1",null,"Successfully logged in!",-1))),h=o((()=>(0,a._)("p",null,"You are now ready to manage products!",-1))),f=[_,h];function y(e,r,s,o,_,h){const y=(0,a.up)("router-link");return o.jwt?((0,a.wg)(),(0,a.iD)("div",g,f)):((0,a.wg)(),(0,a.iD)("div",l,[n,(0,a._)("form",{onSubmit:r[2]||(r[2]=(0,t.iM)(((...e)=>o.handleSubmit&&o.handleSubmit(...e)),["prevent"]))},[c,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":r[0]||(r[0]=e=>o.userData.name=e),maxlength:"30",required:""},null,512),[[t.nr,o.userData.name]]),o.userError?((0,a.wg)(),(0,a.iD)("div",d,(0,u.zw)(o.userError),1)):(0,a.kq)("",!0),i,(0,a.wy)((0,a._)("input",{type:"password","onUpdate:modelValue":r[1]||(r[1]=e=>o.userData.password=e),required:""},null,512),[[t.nr,o.userData.password]]),o.passwordError?((0,a.wg)(),(0,a.iD)("div",p,(0,u.zw)(o.passwordError),1)):(0,a.kq)("",!0),w],32),(0,a._)("div",m,[(0,a.Wm)(y,{to:"/register"},{default:(0,a.w5)((()=>[v])),_:1})])]))}var b=s(4870),k=s(4161),D={setup(){const e=(0,b.iH)({name:"Guest",password:"Guest"}),r=(0,b.iH)(localStorage.getItem("jwt")),s=(0,b.iH)(""),a=(0,b.iH)(""),t=async()=>{try{const r=await k.Z.post("https://e-shop.redglimmer.repl.co/login",e.value);localStorage.setItem("jwt",JSON.parse(r.request.response).accessToken),location.reload()}catch(r){r.request?401===r.request.status?(s.value="Invalid password",a.value=""):404===r.request.status&&(a.value="Invalid user name",s.value=""):(console.log(r),s.value="An error has occurred",a.value="An error has occurred")}};return{userData:e,passwordError:s,userError:a,jwt:r,handleSubmit:t}}},q=s(89);const S=(0,q.Z)(D,[["render",y],["__scopeId","data-v-7f52311f"]]);var E=S}}]);
//# sourceMappingURL=661.171ae32d.js.map